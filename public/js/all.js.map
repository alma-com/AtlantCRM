{"version":3,"sources":["variables.js","init.js","helpers.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["CLASS_AJAX = 'ajax';\r\nID_AJAX_CONTENT = 'ajax-content';          //Контейнер для контента ID\r\nCLASS_CONTENT_HEADER = 'content-header'    //Контейнер для шапки\r\nID_CONTENT_HEADER = 'content-alert'        //Контейнер для вывода описания ID\r\nCONFIRM_MODAL = 'confirmModal'             //ID модального окна с подтверждением\r\nCLASS_NO_AJAX = 'no-ajax';                 //Класс для отключения ajax\r\nCLASS_ERROR = 'has-error';                 //Класс для инпутов с ошибкой\r\nNAME_CHECKBOX_TABLE = 'item[]';            //Название checkbox для хранения id элементов в таблице\r\nBUTTON_DISABLED = 'disabled';              //Класс для кнопки disable\r\nTABLE_CONTROLS = 'table-controls';         //Класс для кнопок управления в таблице\r\nTABLE_CONTROLS_EDIT = 'edit';              //Класс для кнопок управления в таблице в режиме редактирования\r\nCHECKBOX_TOGGLE = 'checkbox-toggle';       //Класс ля checkbox toggle\r\nDATA_TABLE = 'data-table';                 //Класс для таблицы\r\nDATA_TABLE_SMALL = 'data-table-small';     //Класс для таблицы с малым кол-вом елементов\r\nFORM_ITEMS = 'form-items';                 //ID формы по умолчанию для списка в таблице\r\nCLASS_SHOW_INPUT = 'show-input';           //Класс для показа скрытых полей в таблице\r\n","$(document).ready(function() {\r\n  initAjaxClass();\r\n  initAjaxForm();\r\n  initRemoveError();\r\n  initCheck();\r\n  initCheckboxToggle();\r\n  initDataTable();\r\n\r\n  $.srSmoothscroll({\r\n    step: 100,\r\n    speed: 100,\r\n    ease: 'swing',\r\n    target: $('body'),\r\n    container: $(window)\r\n  });\r\n\r\n});\r\n\r\n\r\n$.ajaxSetup({\r\n  headers: {\r\n    'X-XSRF-TOKEN': $('input[name=\"csrf-token\"]').val()\r\n  }\r\n});\r\n\r\n\r\n\r\n/*\r\n* ajaxStart\r\n*/\r\n$(document).ajaxStart(function() {\r\n  Pace.restart();\r\n});\r\n\r\n\r\n\r\nif (history.pushState) {\r\n  history.pushState({page: window.location.pathname, type: \"page\"}, document.title, window.location.pathname);\r\n\r\n  window.addEventListener('popstate', function(e){\r\n    setPage(e.state.page, 'popstate');\r\n  }, false);\r\n\r\n  $(document).on('click','a:not(.'+CLASS_NO_AJAX+'):not([href*=#]):not([href*=\"javascript\"])',function(e){\r\n    setPage($(this).attr('href'));\r\n    return false;\r\n  });\r\n}\r\n\r\n\r\n\r\n/*\r\n* initAjaxClass клик на ссылку с классом ajax\r\n*/\r\nfunction initAjaxClass(){\r\n  $('.'+CLASS_AJAX).click(function(event){\r\n    event.preventDefault();\r\n\r\n    var url = $(this).attr('href') || $(this).attr('data-url');    //URL\r\n    var method = $(this).attr('data-method') || 'GET';      //Метод POST или GET\r\n    var content = $(this).attr('data-content') || ID_AJAX_CONTENT;    //Контейнер в который вставится результат\r\n\r\n    if(url && method && content){\r\n      $.ajax({\r\n        url: url,\r\n        type: method,\r\n        data: {\r\n          '_token' : $('meta[name=\"csrf-token\"]').attr('content')\r\n        },\r\n        success: function(result){\r\n          $(content).html(result);\r\n        }\r\n      });\r\n    }\r\n  });\r\n}\r\n\r\n\r\n\r\n/*\r\n* initAjaxForm ajax form\r\n*/\r\nfunction initAjaxForm(){\r\n  $(\"form:not(.\"+CLASS_NO_AJAX+\")\").submit(function(event){\r\n    event.preventDefault();\r\n\r\n    var $form = $(this);\r\n    var confirm = $form.attr('data-confirm') || '';\r\n\r\n    if(confirm != ''){\r\n      confirmCall(confirm, function(){\r\n        ajaxForm($form);\r\n      });\r\n      return false;\r\n    }\r\n\r\n    ajaxForm($form);\r\n  });\r\n}\r\n\r\n\r\n\r\n/*\r\n* Отправка формы через ajax\r\n*   data {\r\n*     'status': 'success|warning|error|info|',\r\n*     'message': 'Краткий текст сообщения',\r\n*     'description': 'Подробный текст сообщения',\r\n*     'errFields': {\r\n*      'name' : {'Поле \"Имя\" обязательно для заполнения.'}\r\n*    },\r\n*     'url': '/url/to/redirect',\r\n*   }\r\n*\r\n*/\r\nfunction ajaxForm($form){\r\n  var url = $form.attr('action');\r\n  var method = $form.attr('method');\r\n  var data = $form.serializeArray();\r\n\r\n  $.ajax({\r\n    url: url,\r\n    type: method,\r\n    data: data,\r\n    success: function(data){\r\n      successDo(data, $form);\r\n    },\r\n    error: function() {\r\n      notie.alert(3, 'Произошла ошибка', 1.5);\r\n    }\r\n  });\r\n}\r\n\r\n\r\n\r\n//При фокусе убрать красную обводку\r\nfunction initRemoveError(){\r\n  $(':input').on('focus', function() {\r\n    $(this).closest('.form-group').removeClass(CLASS_ERROR);\r\n  });\r\n}\r\n\r\n\r\n\r\n/*\r\n* iCheck\r\n*/\r\nfunction initCheck(){\r\n  $('input[type=\"checkbox\"]').iCheck({\r\n    checkboxClass: 'icheckbox_flat-blue',\r\n    radioClass: 'iradio_flat-blue'\r\n  });\r\n\r\n  $(\"input[name='\"+NAME_CHECKBOX_TABLE+\"']\").on('ifClicked', function () {\r\n    $(this).iCheck(\"toggle\");\r\n\r\n    if($(\"input[name='\"+NAME_CHECKBOX_TABLE+\"']:checked\").length > 0){\r\n      $('.'+TABLE_CONTROLS+' .btn-group').find(':input').removeClass(BUTTON_DISABLED);\r\n    }else{\r\n      $('.'+TABLE_CONTROLS+' .btn-group').find(':input').addClass(BUTTON_DISABLED);\r\n    }\r\n  });\r\n}\r\n\r\n\r\n\r\n/*\r\n* checkbox-toggle\r\n*/\r\nfunction initCheckboxToggle(){\r\n  $(\".\"+CHECKBOX_TOGGLE).on('ifToggled', function () {\r\n    var clicks = $(this).data('clicks');\r\n    var name = $(this).data('name');\r\n    if (clicks) {\r\n      //Uncheck all checkboxes\r\n      $(\"input[name='\"+name+\"']\").iCheck(\"uncheck\");\r\n      $(\".\"+CHECKBOX_TOGGLE+\"[data-name='\"+name+\"']\").iCheck(\"uncheck\");\r\n      $('.'+TABLE_CONTROLS+' .btn-group').find(':input').addClass(BUTTON_DISABLED);\r\n    } else {\r\n      //Check all checkboxes\r\n      $(\"input[name='\"+name+\"']\").iCheck(\"check\");\r\n      $(\".\"+CHECKBOX_TOGGLE+\"[data-name='\"+name+\"']\").iCheck(\"check\");\r\n      $('.'+TABLE_CONTROLS+' .btn-group').find(':input').removeClass(BUTTON_DISABLED);\r\n    }\r\n    $(this).data(\"clicks\", !clicks);\r\n  });\r\n}\r\n\r\n\r\n\r\n/*\r\n*  DataTable\r\n*/\r\nfunction initDataTable(){\r\n  $(\".\"+DATA_TABLE).DataTable({\r\n    \"language\": {\"url\": \"//cdn.datatables.net/plug-ins/1.10.10/i18n/Russian.json\"},\r\n    \"pageLength\": 25,\r\n    \"columnDefs\": [{ targets: 'no-sort', orderable: false, width: \"20px\" }],\r\n    \"lengthMenu\": [[25, 50, 100, -1], [25, 50, 100, \"Все\"]],\r\n    stateSave: true\r\n  });\r\n\r\n  $(\".\"+DATA_TABLE_SMALL).DataTable({\r\n    \"language\": {\"url\": \"//cdn.datatables.net/plug-ins/1.10.10/i18n/Russian.json\"},\r\n    \"pageLength\": 25,\r\n    \"paging\": false,\r\n    \"lengthChange\": false,\r\n    \"searching\": false,\r\n    \"ordering\": true,\r\n    \"info\": false,\r\n    \"autoWidth\": false,\r\n    \"columnDefs\": [{ targets: 'no-sort', orderable: false, width: \"20px\" }],\r\n    stateSave: true\r\n  });\r\n}\r\n","/*\r\n* Ajax загрузка страницы по url\r\n*/\r\nfunction setPage(page, popstate){\r\n  var page = page || '';\r\n  var popstate = popstate || '';\r\n\r\n  //Выход из функции\r\n  if(page == ''){\r\n    return false;\r\n  }\r\n\r\n  $('.sidebar-menu a').each(function(){\r\n    var url = $(this).attr('href');\r\n    if(page == url){\r\n      $(this).closest('li').addClass('active');\r\n      $(this).closest('li').parent().closest('li').addClass('active');\r\n    }else{\r\n      $(this).closest('li').removeClass('active');\r\n    }\r\n  });\r\n\r\n  $.ajax({\r\n    url: page,\r\n    type: 'GET',\r\n    data: {\r\n      '_token' : $('meta[name=\"csrf-token\"]').attr('content')\r\n    },\r\n    success: function(data){\r\n      var title = document.title;\r\n      var content = '';\r\n      var content_header = '';\r\n\r\n      if(data.hasOwnProperty('title')){title = data['title'];}\r\n      if(data.hasOwnProperty('content')){content = data['content'];}\r\n      if(data.hasOwnProperty('content-header')){content_header = data['content-header'];}\r\n\r\n\r\n      document.title = title;\r\n      $(\"#\"+ID_AJAX_CONTENT).html(content);\r\n      $('.'+CLASS_CONTENT_HEADER).html(content_header);\r\n      scrollTo();\r\n\r\n      initAjaxClass();\r\n      initAjaxForm();\r\n      initRemoveError();\r\n      initCheck();\r\n      initCheckboxToggle();\r\n      initDataTable();\r\n\r\n      if(popstate == ''){\r\n        history.pushState({page: page, type: \"page\"}, title, page);\r\n      }\r\n    },\r\n    error: function() {\r\n      notie.alert(3, 'Произошла ошибка', 1.5);\r\n    }\r\n  });\r\n  return false;\r\n}\r\n\r\n\r\n\r\n/*\r\n* Скролл к элементу\r\n*/\r\nfunction scrollTo($elem){\r\n  var offset = 0;\r\n  if($elem){\r\n    offset = $elem.offset().top/1 + 100;\r\n  }\r\n  var body = $(\"html, body\");\r\n  body.stop().animate({scrollTop: offset}, '300', 'swing');\r\n}\r\n\r\n\r\n\r\n/*\r\n* Вызов confirm\r\n*/\r\nfunction confirmCall(text, yesCallback){\r\n  var text = text || '';\r\n  var yesCallback = yesCallback || '';\r\n  var $wrapConfirm = $('#'+CONFIRM_MODAL);\r\n\r\n  // Перед открыванием модального окна\r\n  $wrapConfirm.on('show.bs.modal', function (event) {\r\n    $(this).find('.modal-body').html(text);\r\n    $(this).unbind('show.bs.modal');\r\n  });\r\n\r\n  // Когда модальное окно видно\r\n  $wrapConfirm.on('shown.bs.modal', function (event) {\r\n    $(this).find(':submit').focus();\r\n    $(this).unbind('shown.bs.modal');\r\n  });\r\n\r\n  //Показ модального окна\r\n  $wrapConfirm.modal('show');\r\n\r\n  // При нажатии на кнопку ок\r\n  $wrapConfirm.find(\"form\").submit(function (event) {\r\n    event.preventDefault();\r\n    $wrapConfirm.modal('hide');\r\n\r\n    yesCallback();\r\n\r\n    $(this).unbind('submit');\r\n  });\r\n\r\n\r\n  // При скрытии окна сбрасываем события\r\n  $wrapConfirm.on('hide.bs.modal', function (event) {\r\n    $wrapConfirm.find(\"form\").unbind('submit');\r\n    $(this).unbind('hide.bs.modal');\r\n  });\r\n  return false;\r\n}\r\n\r\n\r\n\r\n/*\r\n* Вызов события в контроллере\r\n*/\r\nfunction actionCall(el, url, confirm){\r\n  var el = el || '';\r\n  var url = url || '';\r\n  var confirm = confirm || '';\r\n\r\n  if(el != '' && $(el).hasClass(BUTTON_DISABLED)){\r\n    return false;\r\n  }\r\n\r\n  if(confirm != ''){\r\n    confirmCall(confirm, function(){\r\n      actionCall(el, url);\r\n    });\r\n    return false;\r\n  }\r\n\r\n  var $form = $('#'+FORM_ITEMS);\r\n\r\n  var disabled = $form.find(':input:disabled').removeAttr('disabled');\r\n  var data = $form.serializeArray();\r\n  disabled.attr('disabled','disabled');\r\n\r\n  $.ajax({\r\n    url: url,\r\n    type: 'POST',\r\n    data: data,\r\n    success: function(data){\r\n      successDo(data, $form);\r\n    },\r\n    error: function() {\r\n      notie.alert(3, 'Произошла ошибка', 1.5);\r\n    }\r\n  });\r\n\r\n  return false;\r\n}\r\n\r\n\r\n\r\n\r\n/*\r\n*  стандартные действия при успешно ajax\r\n*/\r\nfunction successDo(data, $form){\r\n  var data = data || '';\r\n  var $form = $form || '';\r\n  //console.log(data);\r\n\r\n  if(data.url != ''){\r\n    setPage(data.url);\r\n  }\r\n\r\n  $('#'+ID_CONTENT_HEADER).slideUp(0);\r\n  if(data.description != ''){\r\n    scrollTo();\r\n    $('#'+ID_CONTENT_HEADER).slideUp(0);\r\n    $('#'+ID_CONTENT_HEADER).html(data.description);\r\n    $('#'+ID_CONTENT_HEADER).delay(300).slideDown(300);\r\n  }\r\n\r\n  if(data.errFields != ''){\r\n    $.each(data.errFields, function(index, value) {\r\n      if(index.indexOf(\"table_\") === -1){\r\n        var field = index.split('.').map(function(word, count){\r\n          if(count > 0){\r\n            return \"[\" + word.trim() + \"]\";\r\n          }\r\n          return word.trim();\r\n        }).join('');\r\n\r\n        //Поля формы\r\n        var $findField = $form.find(':input[name=\"'+field+'\"]');\r\n        $findField.parent().addClass(CLASS_ERROR);\r\n        blinkElem($findField.delay(300));\r\n\r\n      } else {\r\n        //Поля таблицы\r\n        var item = index.replace(\"table_\", \"\");\r\n        blinkElem($('tr[data-item=\"'+item+'\"]').delay(300));\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  switch (data.status) {\r\n    case 'success':\r\n      notie.alert(1, data.message.toString(), 1.5);\r\n    break\r\n    case 'info':\r\n      notie.alert(4, data.message.toString(), 1.5);\r\n    break\r\n    case 'warning':\r\n      notie.alert(2, data.message, 1.5);\r\n    break\r\n    case 'error':\r\n      notie.alert(3, data.message, 1.5);\r\n    break\r\n    default:\r\n      notie.alert(1, data.message.toString(), 1.5);\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\n\r\n\r\n\r\n/*\r\n* Мигание элемента\r\n*/\r\nfunction blinkElem($elem, count){\r\n  var $elem = $elem || '';\r\n  var count = count || 3;\r\n  if($elem != ''){\r\n    for(i=0;i<count;i++) {\r\n      $elem.fadeTo(250, 0.3).fadeTo(250, 1.0);\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\n/**\r\n * Где выделены checkbox появляются input\r\n */\r\nfunction editTable(el, type){\r\n  var el = el || '';\r\n  var type = type || 'show';\r\n  var $form = $('#'+FORM_ITEMS);\r\n\r\n  if(el != '' && $(el).hasClass(BUTTON_DISABLED)){\r\n    return false;\r\n  }\r\n\r\n  if(type == 'show'){\r\n\r\n    $form.find(\"input[type='checkbox']\").iCheck(\"disable\");\r\n\r\n    $form.find(\"input[name='\"+NAME_CHECKBOX_TABLE+\"']:checked\").each(function(){\r\n      var id = $(this).val();\r\n      $form.find('tr[data-item=\"'+id+'\"]').addClass(CLASS_SHOW_INPUT);\r\n    });\r\n\r\n    $form.find('.'+TABLE_CONTROLS).addClass(TABLE_CONTROLS_EDIT);\r\n  }\r\n\r\n\r\n  if(type == 'hide'){\r\n    $form.find(\"input[type='checkbox']\").iCheck(\"enable\");\r\n    $form.find('tr').removeClass(CLASS_SHOW_INPUT);\r\n    $form.find('.'+TABLE_CONTROLS).removeClass(TABLE_CONTROLS_EDIT);\r\n  }\r\n  return false;\r\n}\r\n"],"sourceRoot":"/source/"}